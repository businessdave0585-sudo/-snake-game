<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu Snake Simple</title>
  <style>
    body { display: flex; justify-content: center; align-items: center; height: 100vh; background: #222; }
      #top-bar {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-top: 20px;
      }
      .fire-frame {
        position: relative;
        display: inline-block;
      }
      .fire-inner {
        position: absolute;
        top: 10px; left: 10px; right: 10px; bottom: 10px;
        pointer-events: none;
        z-index: 2;
        border-radius: 16px;
        box-shadow:
          0 0 32px 8px #ff9800cc,
          0 0 64px 16px #ffb300cc,
          0 0 0 0 #fff8;
        animation: fire-inner-glow 1.1s infinite alternate;
      }
      canvas {
        background: #111;
        border: 14px solid #ff9800;
        border-radius: 24px;
        box-shadow:
          0 0 64px 24px #ff9800cc,
          0 0 120px 48px #ffb300cc,
          0 0 0 0 #fff8;
        animation: fire-glow 1.2s infinite alternate;
        z-index: 1;
      }
      @keyframes fire-inner-glow {
        0% { box-shadow: 0 0 32px 8px #ff9800cc, 0 0 64px 16px #ffb300cc, 0 0 0 0 #fff8; }
        50% { box-shadow: 0 0 48px 16px #ffb300ee, 0 0 80px 24px #ff9800cc, 0 0 0 0 #fff8; }
        100% { box-shadow: 0 0 32px 8px #ff9800cc, 0 0 64px 16px #ffb300cc, 0 0 0 0 #fff8; }
      }
      @keyframes fire-glow {
        0% { box-shadow: 0 0 64px 24px #ff9800cc, 0 0 120px 48px #ffb300cc, 0 0 0 0 #fff8; }
        50% { box-shadow: 0 0 96px 40px #ffb300ee, 0 0 180px 80px #ff9800cc, 0 0 0 0 #fff8; }
        100% { box-shadow: 0 0 64px 24px #ff9800cc, 0 0 120px 48px #ffb300cc, 0 0 0 0 #fff8; }
      }
  </style>
</head>
  <body>
    <!-- Ecran d'accueil -->
    <div id="welcome-screen" style="position:fixed;z-index:10;top:0;left:0;width:100vw;height:100vh;background:#111;display:flex;flex-direction:column;align-items:center;justify-content:center;">
      <canvas id="fireworks-canvas" style="position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:1;"></canvas>
      <div style="position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;">
        <h1 style="color:#fff;font-size:2.8em;text-shadow:0 2px 18px #ff9800,0 0 40px #fff;letter-spacing:2px;margin-bottom:18px;line-height:1.1;">
  <span style="font-size:1.2em;vertical-align:middle;">üêç</span> Bienvenue au jeu snake de DAVID <span style="font-size:1.2em;vertical-align:middle;">üéâ</span>
</h1>
  <button id="welcome-start-btn" style="padding:18px 50px;font-size:1.5em;background:#ff9800;color:#fff;border:none;border-radius:12px;cursor:pointer;box-shadow:0 2px 8px #0004;margin-bottom:18px;">D√©marrer le jeu</button>
  <div id="countdown" style="color:#fff;font-size:2.5em;font-weight:bold;margin-top:10px;display:none;text-shadow:0 2px 12px #ff9800,0 0 40px #fff;"></div>
      </div>
    </div>

    <div id="game-container" style="position: relative; width: 900px; height: 900px; margin: auto; opacity:0.5; pointer-events:none;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" alt="python" style="position: absolute; left: -90px; top: 50%; transform: translateY(-50%); width: 90px; height: 90px;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" alt="python" style="position: absolute; right: -90px; top: 50%; transform: translateY(-50%) scaleX(-1); width: 90px; height: 90px;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" alt="python" style="position: absolute; top: -90px; left: 50%; transform: translateX(-50%); width: 90px; height: 90px;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" alt="python" style="position: absolute; bottom: -90px; left: 50%; transform: translateX(-50%) scaleY(-1); width: 90px; height: 90px;">
      <span class="fire-frame" style="position:relative;display:inline-block;">
        <canvas id="game" width="900" height="900"></canvas>
        <span class="fire-inner"></span>
        <button id="big-start-btn" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;padding:32px 80px;font-size:2.2em;background:#ff9800;color:#fff;border:none;border-radius:20px;box-shadow:0 2px 16px #0008;cursor:pointer;display:none;">D√©marrer le jeu</button>
      </span>
    <!-- Game Over Screen -->
    <div id="gameover-screen" style="display:none;position:fixed;z-index:20;top:0;left:0;width:100vw;height:100vh;background:rgba(20,0,0,0.92);backdrop-filter:blur(2px);align-items:center;justify-content:center;flex-direction:column;">
      <div style="text-align:center;z-index:21;">
        <div style="font-size:4em;margin-bottom:10px;">üò¢</div>
  <div id="gameover-msg" style="color:#fff;font-size:2em;font-weight:bold;margin-bottom:18px;text-shadow:0 2px 12px #ff9800,0 0 40px #fff;">Game Over !</div>
  <div id="highscore-label" style="font-size:1.1em;color:#ff9800;font-weight:bold;margin-bottom:18px;">Meilleur score : 0</div>
        <button id="restart-btn" style="padding:16px 40px;font-size:1.3em;background:#ff9800;color:#fff;border:none;border-radius:12px;cursor:pointer;box-shadow:0 2px 8px #0004;">Recommencer</button>
      </div>
    </div>
    </div>
  <script>
  // --- FEU D'ARTIFICE ---
  const fwCanvas = document.getElementById('fireworks-canvas');
  const fwCtx = fwCanvas.getContext('2d');
  function resizeFW() {
    fwCanvas.width = window.innerWidth;
    fwCanvas.height = window.innerHeight;
  }
  resizeFW();
  window.addEventListener('resize', resizeFW);
  // Particules feu d'artifice
  function randomColor() {
    const colors = ['#ff9800','#ffeb3b','#00e676','#00bcd4','#3f51b5','#e91e63','#fff'];
    return colors[Math.floor(Math.random()*colors.length)];
  }
  class Particle {
    constructor(x, y, color) {
      this.x = x; this.y = y;
      this.radius = 2 + Math.random()*2;
      this.color = color;
      this.angle = Math.random()*2*Math.PI;
      this.speed = 2 + Math.random()*4;
      this.alpha = 1;
      this.decay = 0.01 + Math.random()*0.015;
    }
    update() {
      this.x += Math.cos(this.angle)*this.speed;
      this.y += Math.sin(this.angle)*this.speed;
      this.speed *= 0.98;
      this.alpha -= this.decay;
    }
    draw(ctx) {
      ctx.save();
      ctx.globalAlpha = Math.max(this.alpha,0);
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, 2*Math.PI);
      ctx.fillStyle = this.color;
      ctx.fill();
      ctx.restore();
    }
  }
  let fireworks = [];
  function launchFirework() {
    const x = Math.random()*fwCanvas.width*0.8 + fwCanvas.width*0.1;
    const y = Math.random()*fwCanvas.height*0.4 + fwCanvas.height*0.1;
    const color = randomColor();
    for(let i=0;i<32;i++) {
      fireworks.push(new Particle(x, y, color));
    }
  }
  setInterval(launchFirework, 900);
  function animateFW() {
    fwCtx.clearRect(0,0,fwCanvas.width,fwCanvas.height);
    fireworks.forEach(p=>{p.update();p.draw(fwCtx);});
    fireworks = fireworks.filter(p=>p.alpha>0);
    requestAnimationFrame(animateFW);
  }
  animateFW();
  // --- FIN FEU D'ARTIFICE ---

  // Gestion du bouton Commencer et du d√©compte
  const welcomeScreen = document.getElementById('welcome-screen');
  const welcomeStartBtn = document.getElementById('welcome-start-btn');
  const countdownDiv = document.getElementById('countdown');
  welcomeStartBtn.addEventListener('click', function() {
    welcomeStartBtn.style.display = 'none';
    countdownDiv.style.display = 'block';
    let count = 3;
    countdownDiv.textContent = count;
    const interval = setInterval(()=>{
      count--;
      if(count>0) {
        countdownDiv.textContent = count;
      } else {
        countdownDiv.textContent = 'Go!';
        setTimeout(()=>{
          welcomeScreen.style.display = 'none';
          // Affiche le gros bouton d√©marrer dans le cadre du jeu
          showBigStartBtn();
        }, 600);
        clearInterval(interval);
      }
    }, 900);
  });

  // --- Affichage du gros bouton D√©marrer dans le cadre du jeu apr√®s le feu d'artifice ---
  const bigStartBtn = document.getElementById('big-start-btn');
  function showBigStartBtn() {
    bigStartBtn.style.display = 'block';
    gameContainer.style.opacity = 1;
    gameContainer.style.pointerEvents = 'auto';
  }
  bigStartBtn.onclick = function() {
    bigStartBtn.style.display = 'none';
    if (typeof startGame === 'function') startGame();
  };
  </script>
  <!-- Sons distincts et libres -->
  <audio id="eat-sound" src="https://cdn.pixabay.com/audio/2022/10/16/audio_12b1b7b6e2.mp3"></audio> <!-- pop -->
  <audio id="lose-sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b9b7bfa.mp3"></audio> <!-- fail -->
  <audio id="bg-sound" src="https://cdn.pixabay.com/audio/2022/10/16/audio_12b1b7b6e2.mp3" loop></audio> <!-- simple fond -->
  <script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const grid = 30; // taille d'une case
  let snake = [{x: 10 * grid, y: 15 * grid}];
  let dx = grid, dy = 0;
  let food = {x: 15 * grid, y: 15 * grid};
  let score = 0;
  let speed = 180; // vitesse de d√©part plus lente (ms)
  let loopId;
  // Sons
  const eatSound = document.getElementById('eat-sound');
  const loseSound = document.getElementById('lose-sound');
  const bgSound = document.getElementById('bg-sound');
  // Contr√¥le d√©marrage
  const startBtn = document.getElementById('start-btn');
  // const muteBtn = document.getElementById('mute-btn');
  // const highscoreLabel = document.getElementById('highscore-label');
  const gameContainer = document.getElementById('game-container');
  let muted = false;
  let highscore = localStorage.getItem('snake_highscore') ? parseInt(localStorage.getItem('snake_highscore')) : 0;
  document.querySelectorAll('#highscore-label').forEach(e => e.textContent = 'Meilleur score : ' + highscore);

    // Image de serpent (python stylis√©)
    const snakeImg = new Image();
    let snakeImgLoaded = false;
    snakeImg.onload = () => { snakeImgLoaded = true; };
    snakeImg.onerror = () => { snakeImgLoaded = false; };
  // Image segment de serpent vue du dessus (libre de droits, adapt√©e snake)
  snakeImg.src = 'https://raw.githubusercontent.com/mauriciopoppe/snake/master/assets/body.png';

    function drawSnake() {
      snake.forEach(part => {
        if (snakeImgLoaded) {
          ctx.drawImage(snakeImg, part.x, part.y, grid, grid);
        } else {
          ctx.fillStyle = '#0f0';
          ctx.fillRect(part.x, part.y, grid, grid);
        }
      });
    }

    function drawFood() {
      ctx.fillStyle = '#f00';
      ctx.fillRect(food.x, food.y, grid, grid);
    }

    function moveSnake() {
      const head = {x: snake[0].x + dx, y: snake[0].y + dy};
      snake.unshift(head);
      if (head.x === food.x && head.y === food.y) {
        score++;
        if (!muted && eatSound) { try { eatSound.currentTime = 0; eatSound.play(); } catch(e){} }
        // G√©n√©rer la nourriture dans la grille 30x30 (900/30 = 30)
        food = {
          x: Math.floor(Math.random() * 30) * grid,
          y: Math.floor(Math.random() * 30) * grid
        };
        // Le snake grandit (on ne retire pas la queue)
        // Augmenter la vitesse progressivement (ralentir l'intervalle)
        if (speed > 60) {
          speed -= 5;
          clearInterval(loopId);
          loopId = setInterval(gameLoop, speed);
        }
      } else {
        snake.pop();
      }
    }

    function checkCollision() {
      const head = snake[0];
      if (head.x < 0 || head.x >= 900 || head.y < 0 || head.y >= 900) return true;
      for (let i = 1; i < snake.length; i++) {
        if (head.x === snake[i].x && head.y === snake[i].y) return true;
      }
      return false;
    }

    function gameLoop() {
      if (checkCollision()) {
        // Son de perdant
        if (!muted && loseSound) { try { loseSound.currentTime = 0; loseSound.play(); } catch(e){} }
        // Highscore
        if (score > highscore) {
          highscore = score;
          localStorage.setItem('snake_highscore', highscore);
          document.querySelectorAll('#highscore-label').forEach(e => e.textContent = 'Meilleur score : ' + highscore);
        }
         // Vibration √† la fin de la partie (si support√©)
         if (window.navigator && window.navigator.vibrate) {
           window.navigator.vibrate([200, 100, 200]);
         }
         setTimeout(() => {
           // Affiche l'√©cran Game Over avec emoji et bouton
           document.getElementById('gameover-screen').style.display = 'flex';
           document.getElementById('gameover-msg').textContent = 'Game Over ! Score : ' + score;
         }, 100);
  // Gestion du bouton recommencer (Game Over)
  document.getElementById('restart-btn').onclick = function() {
    document.getElementById('gameover-screen').style.display = 'none';
    // R√©initialiser le jeu
    snake = [{x: 10 * grid, y: 15 * grid}];
    dx = grid; dy = 0;
    food = {x: 15 * grid, y: 15 * grid};
    score = 0;
    speed = 180;
    ctx.clearRect(0, 0, 900, 900);
    clearInterval(loopId);
    loopId = setInterval(gameLoop, speed);
    if (!muted && bgSound) { try { bgSound.currentTime = 0; bgSound.play(); } catch(e){} }
  };
        clearInterval(loopId);
        return;
      }
      ctx.clearRect(0, 0, 900, 900);
      drawFood();
      moveSnake();
      drawSnake();
    }

    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowUp' && dy === 0) { dx = 0; dy = -grid; }
      else if (e.key === 'ArrowDown' && dy === 0) { dx = 0; dy = grid; }
      else if (e.key === 'ArrowLeft' && dx === 0) { dx = -grid; dy = 0; }
      else if (e.key === 'ArrowRight' && dx === 0) { dx = grid; dy = 0; }
    });

    // Contr√¥le tactile (swipe)
    let touchStartX = 0, touchStartY = 0;
    let touchEndX = 0, touchEndY = 0;
    canvas.addEventListener('touchstart', function(e) {
      if (e.touches.length === 1) {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
      }
    });
    canvas.addEventListener('touchmove', function(e) {
      if (e.touches.length === 1) {
        touchEndX = e.touches[0].clientX;
        touchEndY = e.touches[0].clientY;
      }
    });
    canvas.addEventListener('touchend', function(e) {
      let dxTouch = touchEndX - touchStartX;
      let dyTouch = touchEndY - touchStartY;
      if (Math.abs(dxTouch) > Math.abs(dyTouch)) {
        // Swipe horizontal
        if (dxTouch > 30 && dx === 0) { dx = grid; dy = 0; } // droite
        else if (dxTouch < -30 && dx === 0) { dx = -grid; dy = 0; } // gauche
      } else {
        // Swipe vertical
        if (dyTouch > 30 && dy === 0) { dx = 0; dy = grid; } // bas
        else if (dyTouch < -30 && dy === 0) { dx = 0; dy = -grid; } // haut
      }
    });

    // D√©marrage du jeu apr√®s interaction utilisateur
    function startGame() {
      // Attendre que l'image du serpent soit charg√©e avant de d√©marrer
      if (!snakeImgLoaded && !snakeImg.complete) {
        snakeImg.onload = () => startGame();
        return;
      }
      gameContainer.style.opacity = 1;
      gameContainer.style.pointerEvents = 'auto';
      // On ne cache plus startBtn car il n'existe plus
      if (loopId) clearInterval(loopId);
      // R√©initialiser le jeu
      snake = [{x: 10 * grid, y: 15 * grid}];
      dx = grid; dy = 0;
      food = {x: 15 * grid, y: 15 * grid};
      score = 0;
      speed = 180;
      ctx.clearRect(0, 0, 900, 900);
      loopId = setInterval(gameLoop, speed);
      if (!muted && bgSound) { try { bgSound.currentTime = 0; bgSound.volume = 0.2; bgSound.play(); } catch(e){} }
    }
    startBtn.addEventListener('click', startGame);

    // Mute/Unmute
     // Suppression du bouton volume car le son ne fonctionne pas
  </script>
</body>
</html>
